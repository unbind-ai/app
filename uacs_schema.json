{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://unbind-ai.github.io/app/uacs_schema.json",
  "title": "Universal AI Conversation Standard (UACS)",
  "description": "A universal JSON format for AI conversation data portability across platforms",
  "version": "1.0.0",
  "type": "object",
  "required": ["uacs_version", "conversations"],
  "properties": {
    "uacs_version": {
      "type": "string",
      "description": "Version of the UACS schema",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "export_metadata": {
      "type": "object",
      "description": "Metadata about the export process",
      "properties": {
        "exported_at": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of when the export was created"
        },
        "exporter": {
          "type": "string",
          "description": "Name and version of the export tool"
        },
        "source_url": {
          "type": "string",
          "format": "uri",
          "description": "URL of the source platform"
        }
      }
    },
    "statistics": {
      "type": "object",
      "description": "Summary statistics of the export",
      "properties": {
        "total_conversations": {
          "type": "integer",
          "minimum": 0
        },
        "total_messages": {
          "type": "integer",
          "minimum": 0
        },
        "conversations_with_errors": {
          "type": "integer",
          "minimum": 0
        },
        "export_duration_ms": {
          "type": "integer",
          "minimum": 0,
          "description": "Time taken to complete export in milliseconds"
        }
      }
    },
    "personalization": {
      "type": ["object", "null"],
      "description": "User personalization data (memory, custom instructions)",
      "properties": {
        "memory": {
          "type": ["array", "null"],
          "description": "Platform memory/context items"
        },
        "settings": {
          "type": ["object", "null"],
          "description": "User settings from the platform"
        },
        "custom_instructions": {
          "type": ["object", "null"],
          "description": "User-defined custom instructions"
        }
      }
    },
    "conversations": {
      "type": "array",
      "description": "Array of all conversations",
      "items": {
        "type": "object",
        "required": ["id", "title", "source_platform", "messages"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier from the source platform"
          },
          "title": {
            "type": "string",
            "description": "Conversation title"
          },
          "created_at": {
            "type": ["string", "null"],
            "format": "date-time",
            "description": "ISO 8601 timestamp of conversation creation"
          },
          "updated_at": {
            "type": ["string", "null"],
            "format": "date-time",
            "description": "ISO 8601 timestamp of last update"
          },
          "source_platform": {
            "type": "string",
            "enum": [
              "chatgpt",
              "chatgpt_plus",
              "chatgpt_teams",
              "claude",
              "claude_pro",
              "gemini",
              "gemini_advanced",
              "grok",
              "perplexity",
              "deepseek",
              "mistral",
              "other"
            ],
            "description": "Platform the conversation originated from"
          },
          "context": {
            "type": ["object", "null"],
            "description": "Conversation-specific context or system prompts",
            "properties": {
              "system_prompt": {
                "type": ["string", "null"]
              },
              "custom_instructions": {
                "type": ["string", "null"]
              }
            }
          },
          "gizmo_id": {
            "type": ["string", "null"],
            "description": "Custom GPT identifier (ChatGPT-specific)"
          },
          "is_archived": {
            "type": "boolean",
            "default": false
          },
          "url": {
            "type": ["string", "null"],
            "format": "uri",
            "description": "Direct URL to the conversation on the source platform"
          },
          "messages": {
            "type": "array",
            "description": "Array of messages in the conversation",
            "items": {
              "type": "object",
              "required": ["role", "content"],
              "properties": {
                "id": {
                  "type": ["string", "null"],
                  "description": "Unique message identifier"
                },
                "role": {
                  "type": "string",
                  "enum": ["user", "assistant", "system", "tool"],
                  "description": "Role of the message author"
                },
                "content": {
                  "type": "string",
                  "description": "Full message content"
                },
                "timestamp": {
                  "type": ["string", "null"],
                  "format": "date-time",
                  "description": "ISO 8601 timestamp of message creation"
                },
                "model_name": {
                  "type": ["string", "null"],
                  "description": "Model used for this response (e.g., gpt-4o, claude-3-opus)",
                  "examples": ["gpt-4o", "gpt-4", "claude-3-opus", "gemini-1.5-pro"]
                },
                "token_usage": {
                  "type": ["object", "null"],
                  "description": "Token usage for this message (when available from API)",
                  "properties": {
                    "prompt_tokens": {
                      "type": ["integer", "null"],
                      "minimum": 0
                    },
                    "completion_tokens": {
                      "type": ["integer", "null"],
                      "minimum": 0
                    },
                    "total_tokens": {
                      "type": ["integer", "null"],
                      "minimum": 0
                    }
                  }
                },
                "latency_ms": {
                  "type": ["integer", "null"],
                  "minimum": 0,
                  "description": "Response generation time in milliseconds (when available)"
                },
                "attachments": {
                  "type": ["array", "null"],
                  "description": "File attachments associated with this message",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "filename": {
                        "type": "string"
                      },
                      "mime_type": {
                        "type": "string"
                      },
                      "size_bytes": {
                        "type": "integer"
                      },
                      "url": {
                        "type": ["string", "null"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "errors": {
      "type": "array",
      "description": "Errors encountered during export",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "ID of the conversation that failed"
          },
          "error": {
            "type": "string",
            "description": "Error message"
          }
        }
      }
    }
  }
}
